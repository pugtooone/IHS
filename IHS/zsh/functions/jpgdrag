# function to drag the JPEG directories out of the product folders

# initial tree: 1) Images/Product/.tif
#		    	         /JPEG/.jpeg
#		2) Images/.tif
#			 /JPEG/.jpeg

# final tree: 1) TIFF/Product/.tif
#	         JPEG/Product/.jpg
#	      2) TIFF/.tif
#	         JPEG/.jpg

function jpgdrag(){
if [[ -e $1 ]]; then
	
	cd $1
	PARENT="$(pwd)"

	if [[ -d Images ]]; then
		
		rename -s jpeg jpg **/*(.)
		mv -i Images TIFF
		mkdir JPEG
		local MJPEG="$(pwd)/JPEG"
		
		for dir in [^J]*/**/JPEG; do
			
			cd $dir/..

			# run if product folders existi (tree 1)
			if [[ $(basename "$(pwd)") != TIFF ]]; then
				
				mv -i JPEG $(basename "$(pwd)") # rename JPEG to product
				mv -i $(basename "$(pwd)") $MJPEG # move to MJPEG
				cd $PARENT

			# run if only TIFF folder exist (tree 2)
			elif [[ $(basename "$(pwd)") == TIFF ]]; then
				
				mv -i JPEG/*.jpg $MJPEG
				rm -r JPEG
				cd $PARENT

			fi
		done

		cd ..

	else
		print "Images folder not exist!!!"
	fi
else
	print "Job folder is missing!!!"
fi
}
